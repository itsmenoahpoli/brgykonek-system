<div class="dashboard-layout min-h-screen flex">
  <!-- Mobile Overlay -->
  <div
    *ngIf="sidebarOpen"
    class="fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden"
    (click)="toggleSidebar()"
  ></div>

  <!-- Sidebar -->
  <div
    class="sidebar bg-cover bg-center text-white transition-all duration-300 fixed top-0 left-0 h-screen z-30"
    [ngClass]="{
      'w-64': sidebarOpen,
      'w-16': !sidebarOpen,
      'hidden lg:flex': !sidebarOpen && !sidebarOpen,
      'flex': sidebarOpen
    }"
    style="background-image: url('assets/images/splash-bg.png')"
  >
    <div class="sidebar-overlay absolute inset-0 z-0"></div>
    <button
      (click)="toggleSidebar()"
      class="absolute top-4 right-4 z-20 focus:outline-none"
    >
      <ng-icon *ngIf="sidebarOpen" name="heroXMark" class="w-6 h-6"></ng-icon>
      <ng-icon *ngIf="!sidebarOpen" name="heroBars3" class="w-6 h-6"></ng-icon>
    </button>
    <div
      class="flex flex-col items-center justify-center h-36 relative z-10 mb-8"
    >
      <img
        src="assets/images/brand-logo.png"
        alt="Brand Logo"
        class="h-36 w-auto mt-4"
        *ngIf="sidebarOpen"
      />
    </div>
    <div class="flex items-center justify-between h-16 px-4 relative z-10">
      <span class="font-bold text-lg" *ngIf="sidebarOpen">Dashboard</span>
    </div>
    <ul class="mt-8 space-y-4 px-4 relative z-10" *ngIf="sidebarOpen">
      <li
        *ngFor="let link of sidebarLinks"
        (click)="goToSidebarLink(link)"
        class="hover:text-indigo-200 cursor-pointer flex items-center gap-3"
      >
        <ng-icon [name]="link.icon" class="w-7 h-7"></ng-icon>
        {{ link.label }}
      </li>
    </ul>
  </div>

  <!-- Main Content Area -->
  <div
    class="flex-1 flex flex-col transition-all duration-300"
    [ngClass]="{
      'lg:ml-64': sidebarOpen,
      'lg:ml-16': !sidebarOpen,
      'ml-0': true
    }"
  >
    <!-- Top Navigation -->
    <nav
      class="navbar bg-white shadow h-16 flex items-center px-4 sm:px-6 justify-between fixed top-0 right-0 z-20"
      [ngClass]="{
        'w-[calc(100%-16rem)]': sidebarOpen,
        'w-[calc(100%-4rem)]': !sidebarOpen,
        'w-full lg:w-[calc(100%-16rem)] lg:sidebar-open': sidebarOpen,
        'w-full lg:w-[calc(100%-4rem)] lg:sidebar-closed': !sidebarOpen
      }"
      style="left: auto"
    >
      <!-- Mobile Menu Button -->
      <button
        (click)="toggleSidebar()"
        class="lg:hidden p-2 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"
      >
        <ng-icon name="heroBars3" class="w-6 h-6 text-gray-600"></ng-icon>
      </button>
      
      <span class="font-semibold text-gray-700 text-sm sm:text-base hidden sm:block">Web Dashboard v1.0.0</span>
      
      <div class="flex items-center space-x-2 sm:space-x-4">
        <app-notification-bell></app-notification-bell>
        <button
          (click)="logout()"
          class="bg-red-600 hover:bg-red-700 text-white px-2 sm:px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-1 sm:gap-2 text-sm sm:text-base"
        >
          <ng-icon name="heroArrowRightOnRectangle" class="w-4 h-4 sm:w-5 sm:h-5"></ng-icon>
          <span class="hidden sm:inline">Logout</span>
        </button>
      </div>
    </nav>

    <!-- Main Content -->
    <main
      class="flex-1 p-4 sm:p-6 bg-gradient-to-br from-blue-50 to-indigo-100 overflow-y-auto mt-16"
      style="height: calc(100vh - 4rem)"
    >
      <!-- Breadcrumbs -->
      <nav
        *ngIf="breadcrumbs.length"
        class="mb-4 flex items-center text-xs sm:text-sm text-gray-600 space-x-1 sm:space-x-2 overflow-x-auto"
      >
        <ng-container
          *ngFor="let breadcrumb of breadcrumbs; let i = index; let last = last"
        >
          <span *ngIf="i === 0" class="whitespace-nowrap">{{ breadcrumb.label }}</span>
          <a
            *ngIf="i === 1"
            [routerLink]="breadcrumb.url"
            class="hover:underline whitespace-nowrap"
            >{{ breadcrumb.label }}</a
          >
          <a
            *ngIf="i > 1 && !last"
            [routerLink]="breadcrumb.url"
            class="hover:underline whitespace-nowrap"
            >{{ breadcrumb.label }}</a
          >
          <span *ngIf="i > 1 && last" class="whitespace-nowrap">{{ breadcrumb.label }}</span>
          <span *ngIf="!last" class="mx-1">/</span>
        </ng-container>
      </nav>

      <!-- Page Header -->
      <div *ngIf="title || subtitle" class="mb-4 sm:mb-6">
        <h1 *ngIf="title" class="text-xl sm:text-2xl font-medium text-gray-800 mb-1">
          {{ title }}
        </h1>
        <p *ngIf="subtitle" class="text-sm sm:text-base text-gray-500">{{ subtitle }}</p>
      </div>

      <!-- Page Content -->
      <ng-content></ng-content>
    </main>
  </div>
</div>
